---
- hosts: localhost
  connection: local
  become: true
 
  tasks:
    - name: install git
      apt: pkg=git state=installed

    - name: install cmake
      apt: name=cmake state=installed

    - name: install sqlite
      apt: name=libsqlite3-dev state=installed

    - name: install g++
      apt: name=g++ state=installed

    - name: Ensures /opt/gtest dir exists
      file: path=/opt/gtest state=directory

    - name: get gtest
      unarchive: src=https://github.com/google/googletest/archive/release-1.7.0.tar.gz dest=/opt/gtest copy=no
    
    - name: create lib for gtest
      file: path=/opt/gtest/googletest-release-1.7.0/lib state=directory
     
    - name: build gtest
      shell: cd /opt/gtest/googletest-release-1.7.0/lib; cmake ..; make
